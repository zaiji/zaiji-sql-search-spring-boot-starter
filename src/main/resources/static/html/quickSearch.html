<!DOCTYPE html>
<html lang="en" style="width: 100%;height: 100%;">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="/css/bootstrap/bootstrap.css" rel="stylesheet">
    <link href="/css/bootstrap-table/bootstrap-table.css" rel="stylesheet">
    <link href="/css/daterangepicker/daterangepicker.css" rel="stylesheet">
    <link href="/css/json-viewer/jquery.jsonview.css" rel="stylesheet">
    <script src="/js/jquery/jquery.js"></script>
    <script src="/js/bootstrap/bootstrap.js"></script>
    <script src="/js/bootstrap-table/bootstrap-table.js"></script>
    <script src="/js/daterangepicker/moment.min.js"></script>
    <script src="/js/daterangepicker/daterangepicker.js"></script>
    <script src="/js/json-viewer/jquery.jsonview.js"></script>
    <style>
        .search-item-base {
            display: flex;
            min-width: 200px;
            height: 55px;
            justify-content: center;
            align-items: center;
            margin: 0px 5px;
        }
    </style>
</head>
<body style="width: 100%;height: 100%;margin: 0px;">
<div style="background: lightgray;position: absolute;width: 100%;z-index: 2000">
    <div id="searchItems" style="position: relative;display: flex;flex-wrap: wrap;padding: 15px;">
        <div class="search-item-base">
            <div>处理状态：</div>
            <div>
                <select id="" class="form-control" style="width: 150px;text-align: center;text-align-last: center;">
                    <option value="success">成功</option>
                    <option value="warn">警告</option>
                    <option value="error">失败</option>
                </select>
            </div>
        </div>
        <div class="search-item-base">
            <div>接收状态：</div>
            <div>
                <select id="" class="form-control" style="width: 150px;text-align-last: center;">
                    <option value="success">成功</option>
                    <option value="warn">警告</option>
                    <option value="error">失败</option>
                </select>
            </div>
        </div>
        <div class="search-item-base">
            <div>消息内容：</div>
            <div><input type="text" class="form-control"></div>
        </div>
        <div class="search-item-base">
            <div>接收时间：</div>
            <div>
                <input id="receiverTime" type="text" class="form-control" style="width: 330px;"/>
            </div>
        </div>
        <div class="search-item-base">
            <div>处理时长：</div>
            <div>
                <input type="text" class="form-control"/>
            </div>
        </div>
        <div class="search-item-base">
            <div>处理完成时间：</div>
            <div>
                <input id="completeTime" type="text" class="form-control" style="width: 330px;"/>
            </div>
        </div>
        <div class="search-item-base">
            <button id="searchBtn" class="form-control btn-primary">查询</button>
        </div>
    </div>
    <div id="btnOpenSearchItem" style="background: rgba(0,0,0,0.1);position: absolute;width: 150px;height:25px;bottom: -25px;left: calc(50% - 75px);"></div>
</div>
<div style="height: 100%;overflow: scroll;">
    <table id="table" class="table"></table>
</div>
</body>
<script>
    $(function () {

        $("#btnOpenSearchItem").click(function (evt) {
            evt.stopPropagation();
            $("#searchItems").toggle(250);
        });

        $("#searchItems").click(function (evt) {
            evt.stopPropagation();
        });

        $("body").click(() => {
            $("#searchItems").hide(250);
        });

        $("#receiverTime").daterangepicker({
            //时间选择
            timePicker: true,
            //时间选择24小时
            timePicker24Hour: true,
            //时间秒选择
            timePickerSeconds: true,
            //本地化
            locale: {
                format: 'YYYY-MM-DD HH:mm:ss',
                applyLabel: '确定',
                cancelLabel: '取消',
                fromLabel: '起始时间',
                toLabel: '结束时间',
                daysOfWeek: ['日', '一', '二', '三', '四', '五', '六'],
                monthNames: ['一月', '二月', '三月', '四月', '五月', '六月', '七月', '八月', '九月', '十月', '十一月', '十二月'],
                firstDay: 1
            }
        });
        $("#completeTime").daterangepicker({
            //时间选择
            timePicker: true,
            //时间选择24小时
            timePicker24Hour: true,
            //时间秒选择
            timePickerSeconds: true,
            //本地化
            locale: {
                format: 'YYYY-MM-DD HH:mm:ss',
                applyLabel: '确定',
                cancelLabel: '取消',
                fromLabel: '起始时间',
                toLabel: '结束时间',
                daysOfWeek: ['日', '一', '二', '三', '四', '五', '六'],
                monthNames: ['一月', '二月', '三月', '四月', '五月', '六月', '七月', '八月', '九月', '十月', '十一月', '十二月'],
                firstDay: 1
            }
        });

        $("#table").bootstrapTable({
            url: "/derby/getRececiverLog",
            method: "GET",
            pagination: true,
            pageNumber: 1,
            pageSize: 10,
            pageList: [10, 25, 50, 100],
            sidePagination: "server",
            queryParamsType: '',
            queryParams: () => {
                let param = {}
                // $("#")


                return {
                    pageNum: 1,
                    pageSize: 5
                }
            },
            responseHandler: function (data) {
                return data.data
            },
            columns: [
                {field: "handleStatus", title: '处理状态'},
                {field: 'receiverStatus', title: '接收状态'},
                {field: 'receiverTime', title: '接入时间'},
                {field: 'processingTime', title: '消息处理时长（毫秒）'},
                {field: 'handleInfo', title: '消息处理信息'},
                {field: 'completionTime', title: '消息完成时间'},
                {field: 'receiverDataContext', title: '接入消息'},
                {field: 'dataSourceType', title: '数据源类型'},
                {field: 'dataSourceInfoJsonText', title: '数据源信息json格式字符串'},
                {field: 'dataSourceInfo', title: '数据源信息'},
                {field: 'otherInfo', title: '其他信息'},
            ],
            height: 800
        });

        $("#searchBtn").click(() => {
            $("#table").bootstrapTable("refresh");
        });
    });
</script>
</html>